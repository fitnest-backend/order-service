syntax = "proto3";

package az.fitnest.order;

option java_multiple_files = true;
option java_package = "az.fitnest.order.grpc";
option java_outer_classname = "MembershipPlanProto";

service MembershipPlanService {
  rpc GetGymPlans(GetGymPlansRequest) returns (GetGymPlansResponse); // Deprecated but kept for compatibility until full switch
  rpc CheckIn(CheckInRequest) returns (CheckInResponse);
  
  // New cross-service methods
  rpc CheckPlanExists(CheckPlanExistsRequest) returns (CheckPlanExistsResponse);
  rpc GetPlansByIds(GetPlansByIdsRequest) returns (GetPlansByIdsResponse);
}

message GetGymPlansRequest {
  int64 gym_id = 1;
}

message CheckPlanExistsRequest {
  int64 plan_id = 1;
}

message CheckPlanExistsResponse {
  bool exists = 1;
  bool is_active = 2;
}

message GetPlansByIdsRequest {
  repeated int64 plan_ids = 1;
}

message GetPlansByIdsResponse {
  repeated GymMembershipPlan plans = 1;
}

message GetGymPlansResponse {
  repeated GymMembershipPlan plans = 1;
}

message GymMembershipPlan {
  int64 plan_id = 1;
  string name = 2;
  string currency = 3;
  bool is_active = 4;
  repeated PlanDurationOption options = 5;
  repeated string benefits = 6;
}

message PlanDurationOption {
  int32 duration_months = 1;
  string price_standard = 2;
  string price_discounted = 3;
  int32 entry_limit = 4;
  int32 freeze_days = 5;
  repeated string services = 6;
}

message CheckInRequest {
  int64 user_id = 1;
  int64 gym_id = 2;
}

message CheckInResponse {
  bool success = 1;
  string message = 2;
}
